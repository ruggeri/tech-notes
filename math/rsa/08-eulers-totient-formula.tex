\section{Euler's Totient Function Formula}

\subsection{Multiplicative Formula For $\varphi$}

\begin{proposition}
  $\vphif{p} = p - 1$
\end{proposition}

\begin{proof}
  This is the definition of being prime.
\end{proof}

\begin{proposition}
  \begin{nedqn}
    \vphif{p^k}
  \eqcol
    p^{k-1} \parens{p - 1}
  \end{nedqn}
\end{proposition}

\begin{proof}
  A number is coprime to $p^k$ iff it does not contain $p$ as a factor.
  There are $p^{k-1}$ multiples of $p$ up to and including $p^k$. Thus:

  \begin{nedqn}
    \vphif{p^k}
  \eqcol
    p^k - p^{k-1}
  \\
  \eqcol
    p^{k-1} \parens{p - 1}
  \end{nedqn}
\end{proof}

\begin{proposition}
  If $a, b$ are coprime, then

  \begin{nedqn}
    \vphif{ab}
  \eqcol
    \vphif{a} \vphif{b}
  \end{nedqn}
\end{proposition}

\begin{proof}
  Consider $\Zmod{ab}$ ($a, b$ coprime). This is isomorphic to $\Zmod{a}
  \times \Zmod{b}$ by the Fundamental Theorem of Finite Abelian Groups.

  Consider any $u\in\Zmod{ab}$ and corresponding $u_a \times u_b$ in
  $\Zmoda \times \Zmodb$. Consider the sequence of sums

  \begin{nedqn}
    & u, u + u, u + u + u, \ldots &
  %
  \intertext{and the corresponding sequence of sums}
  %
  &
  u_a \times u_b,
  (u_a + u_a) \times (u_b + u_b),
  (u_a + u_a + u_a) \times (u_b + u_b + u_b)
  \ldots
  &
  \end{nedqn}

  Denote the $k$-th term of the first sequence as $ku$, and the $k$-th
  term of the second sequence as $k\parens{u_a \times u_b}$. Note that
  this is \emph{notation}.

  I claim that a group isomorphism always must fix the identity, since
  $f(x + 0) = f(x) + f(0)$. Therefore 0 always corresponds with $0
  \times 0$ and $ku = 0$ exactly when $k\parens{u_a \times u_b} = 0
  \times 0$.

  Define $\order{u_a \times u_b}$ as the minimum $k > 0$ such that
  $k\parens{u_a \times u_b} = 0 \times 0$. Likewise define $\order{u}$.
  And note that $\order{u} = \order{u_a \times u_b}$.

  Consider the orders $\order{u_a}, \order{u_b}$ in $\Zmoda, \Zmodb$. I
  claim that $\order{u_a \times u_b} = \lcmf{\order{u_a}, \order{u_b}}$.

  Because $\order{u_a}, \order{u_b}$ always divide $a, b$ (Lagrange's
  theorem), we know that the only way $\order{u_a \times u_b} = ab$ is
  if $\order{u_a} = a, \order{u_b} = b$. We also know $\order{u_a} = a$
  iff $u_a$ is coprime with $a$. Likewise $\order{u_b} = b$ iff $u_b$ is
  coprime with $b$. So there are exactly $\vphif{a}\vphif{b}$ distinct
  $u_a \times u_b$ with order equal to $ab$.

  Thus there are exactly $\vphif{a}\vphif{b}$ corresponding $u$ with
  order equal to $ab$. Which are exactly those $u$ which are coprime
  with $ab$.
\end{proof}

\begin{theorem}
  \begin{nedqn}
    \vphif{\prod p_i^{k_i}}
  \eqcol
    \prod p_i^{k_i-1} \parens{p_i - 1}
  \end{nedqn}
\end{theorem}

\begin{proof}
  Note that any two $p_i^{k_i}$ are coprime for distinct primes $p_i$.
  So we know that:

  \begin{nedqn}
    \vphif{\prod p_i^{k_i}}
  \eqcol
    \prod \vphif{p_i^{k_i}}
  %
  \intertext{and by our earlier formula we can then conclude}
  %
  \eqcol
    \prod p_i^{k_i-1} \parens{p_i - 1}
  \end{nedqn}
\end{proof}

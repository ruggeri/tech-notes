\section{Carmichael's Totient Functions}

\subsection{Euler's Totient Function Formula}

\begin{remark}
  We know that $\varphi(p) = p - 1$.
\end{remark}

\begin{remark}
  We know that

  \begin{nedqn}
    \varphi\parens{p^k}
  \eqcol
    p^k - p^k/p
  \\
  \eqcol
    p^{k-1} \parens{p - 1}
  \end{nedqn}

  \noindent
  Why? Because a number is coprime to $p^k$ iff it does not contain $p$
  as a factor.
\end{remark}

\begin{remark}
  Next consider $\varphi(ab)$ for $a, b$ coprime.

  I claim $a, b$ generate the group $\Zmod{ab}$. Why? Just consider $a +
  b$. This is coprime to both $a, b$. Thus $a + b$ must have additive
  order $ab$ in $\Zmod{ab}$. So indeed $a + b$ generates $\Zmod{ab}$.

  Great. So consider all values of the form: $ak_a + bk_b$. $k_a, k_b$
  range over $0,\ldots, b-1$ and $0,\ldots, a-1$. It should be clear
  that there is a unique choice of $k_a, k_b$ for each element of
  $\Zmod{ab}$.

  Great. Now, consider any $k_a$ coprime to $b$. I claim that $ak_a +
  bk_b$ is coprime to $b$. Why? First note that $bk_b$ is just a
  multiple of $b$. So $\gcd\parens{ak_a + bk_b, b} = \gcd\parens{ak_a,
  b}$. But both $a, k_a$ are coprime with $b$ so this is one.

  If I also want to insure that $ak_a + bk_b$ is coprime to $a$, I must
  likewise choose $k_b$ coprime with $a$.

  This shows that there are $\varphi(b)$ choices for $k_a$, and
  $\varphi(a)$ choices for $k_b$. Thus there are $\varphi(a)\varphi(b)$
  choices for $k_a, k_b$ such that $ak_a + bk_b$ is a unit.
\end{remark}

\begin{remark}
  Here is an alternate, more group theoreticy proof. It amounts to the
  same thing.

  Consider $\Zmod{ab}$ ($a, b$ coprime). This is isomorphic to $\Zmod{a}
  \oplus \Zmod{b}$ by the Fundamental Theorem of Finite Abelian Groups.

  We know that $\Zmodx{a}, \Zmodx{b}$ have $\varphi(a), \varphi(b)$
  multiplicative units respectively.

  For each \emph{pair} of multiplicative units $u_a, u_b$ in $\Zmod{a},
  \Zmod{b}$, there is a corresponding \emph{single} element of $u$ of
  $\Zmod{ab}$. That is, $u$ corresponds to $u_a \oplus u_b$.

  By definition of isomorphism, repeated addition of $u$ in $\Zmod{ab}$
  corresponds exactly to repeated addition of $u_a \oplus u_b$ in
  $\Zmod{a} \otimes \Zmod{b}$.

  Multiplication is just repeated addition. Since $u_a, u_b$ are
  multiplicative units, that precisely means that there is some $k$ such
  that $ku_a \oplus ku_b = 1 \oplus 1$.

  What element of $\Zmod{ab}$ corresopnds to $1 \oplus 1$? It must be a
  generatorof $\Zmod{ab}$. In fact, we might as well assume that $1$
  maps to $1 \oplus 1$.  Because any isomorphism that maps a non-$1$
  unit to $1 \oplus 1$ can be replaced by an isomorphism that
  \emph{does}. With this presumption, we've shown that $ku = 1$.

  We can likewise demonstrate that if $u$ is a unit, the corresponding
  $u_a \oplus u_b$ must also be a unit, and thus $u_a, u_b$ must
  individually be units.

  This shows that there are $\varphi(a)\varphi(b)$ units.
\end{remark}

\begin{theorem}
  Since we can break any $n$ into a prime power factorization, we know
  that:

  \begin{nedqn}
    \varphi\parens{\prod p_i^{k_i}}
  \eqcol
    \prod p_i^{k_i-1} \parens{p_i - 1}
  \end{nedqn}
\end{theorem}

\subsection{Carmichael's Totient Function}

\begin{definition}
  \define{Carmichael's totient function} $\lambda(n)$ maps $n$ to the
  smallest number such that $x^{\lambda(n)} = 1 \pmod{n}$ for all units
  $x \in \Zmodnx$.
\end{definition}

\begin{remark}
  When $\varphi(n)$ is prime, $\Zmodnx$ is a finite abelian group of
  prime order. That means that it is cyclic. That means that it is
  generated by some $x$ with $|x| = \varphi(n)$. So when $\varphi(n)$ is
  prime, $\lambda(n) = \varphi(n)$.
\end{remark}

\begin{remark}
  Next, consider when $\varphi(n)$ factors into $\prod p_i$. We can
  again split $\Zmodnx$ into a direct product of cyclic groups, each of
  size $p_i$. That is: $\Zmodnx \cong \bigotimes_i \Zmod{p_i}$.

  Take generators $g_i$ in each subgroup. Multiply these all together to
  get $g = \prod g_i$. It should be clear that $g$ generates $\Zmodnx$.
  It thus has order $\varphi(n)$.

  So again we have $\lambda(n) = \varphi(n)$.
\end{remark}

\begin{remark}
  We may consider what happens when $\varphi(n) = \prod p_i^{k_i}$. Note
  that we can again break this into a direct product of subgroups $A_i$
  of size $p_i^{k_i}$.

  Here is where things are different! We \emph{do not know} whether a
  subgroup $A_i$ is isomorphic to $\Zmod{p_i^{k_i}}$. If this is indeed
  true for each $A_i$ we would again have $\lambda(n) = \varphi(n)$.

  But we \emph{could} have, for instance, $A_i$ is a direct product of
  $k_i$ copies of $\Zmod{p_i}$. In this case, $A_i$ is \emph{acyclic}.
  More to the point, for all $a \in A_i$, $a^{|p_i|} = a$.

  In summary: the question of whether $\lambda(n) = \varphi(n)$ comes
  down to whether every subgroup of $\Zmodnx$ is cyclic. Equivalently:
  it comes down to whether $\Zmodnx$ is itself cyclic. Equivalently: it
  comes down to whether $\Zmodnx$ contains a \emph{primitive root}.
\end{remark}

\begin{definition}
  An element $g$ is a \define{root} of $1$ if $g^n = 1$ for some $n$. In
  a finite group, every element is a root of 1.

  An element $g$ is a \define{primitive root} of $1$ if it has order
  $|G|$. A group has a primitive root of unity iff it is cyclic.
\end{definition}

\begin{proposition}
  Because $\Zmodnx$ into a direct product of $\Zmod{p_i^{k_i}}$, we
  have:

  \begin{nedqn}
    \lambda\parens{\prod p_i^{k_i}}
  \eqcol
    \lcm\parens{
      \lambda\parens{p_1^{k_1}},
      \ldots
      \lambda\parens{p_n^{k_n}}
    }
  \end{nedqn}
\end{proposition}
